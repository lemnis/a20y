<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Link.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Link.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import mix from "@vestergaard-company/js-mixin";
import Command from "./abstract/Command.js";
import boolean from "./../type/boolean";

import AriaExpanded from "../attributes/aria-expanded";

function close() {
	this.expanded = boolean.IS_NOT_ACTIVE;
}

/**
 * An interactive reference to an internal or external resource that,
 * when activated, causes the user agent to navigate to that resource.
 * 
 * @extends Command
 * @mixes AriaExpanded
 * @param {String} options.link.href  URL that should be used
 * @listens click
 * @example
 * &lt;div role="link" data-link-href="http://www.example.com/" tabindex="0">
 * 	Open website
 * &lt;/div>
 */
class Link extends mix(Command).with(AriaExpanded) {
	constructor(...args) {
		super(...args);

		this._.registerCustomValue("link.href");

		if(this._.link.href) {
			this.addEventListener("click", this.onClick.bind(this));
			this.addEventListener("key", this.onClick.bind(this), { key: "enter" });
		}

		this.addEventListener("expanded")

		if (this.expanded !== undefined) { // todo: add when first time aria-expanded is boolean
			this.controls.forEach(control => control.addEventListener("close", close.bind(this)));
			this.addEventListener("click", this.onExpanded.bind(this));
			this.addEventListener("key", this.onExpanded.bind(this), { key: "enter" });
		}
	}

	/**
	 * Fired when state of expanded is changed 
	 * @param {Event} ev 
	 */
	onExpanded(ev) {
		if (typeof super.onExpanded == "function") super.onExpanded(ev);

		if (this.disabled !== true) {
			if (this.expanded) {
				this.controls.forEach(control => {
					control.element.hidden = false;
				});
			} else {
				this.controls.forEach(control => {
					control.element.hidden = true;
				});
			}
		}
	}

	/**
	 * Open the url that is defined in the options,  
	 * fires an click event only if its origin wasn't an click event
	 * @param {Event} ev 
	 * @fires link#accessibleclick
	 * @fires click
	 */
	onClick(ev) {
		if (typeof super.onClick == "function") super.onClick(ev);
	
		if(this._.link.href) {
			console.log("should open", this._.link.href);
			// window.location.href = this._.link.href;
		}

		/**
     * An click triggered by an keyboard or mouse
     * @event Link#accessibleclick
     */
		this.dispatchEvent(new Event("accessibleclick"));
		if(ev.type !== "click") {
			this.dispatchEvent(new MouseEvent("click"));
		}
	}
}

export default Link;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Radio.html">Radio</a></li></ul><h3>Classes</h3><ul><li><a href="Alert.html">Alert</a></li><li><a href="Alertdialog.html">Alertdialog</a></li><li><a href="Button.html">Button</a></li><li><a href="Checkbox.html">Checkbox</a></li><li><a href="Combobox.html">Combobox</a></li><li><a href="Dialog.html">Dialog</a></li><li><a href="Link.html">Link</a></li><li><a href="Listbox.html">Listbox</a></li><li><a href="module-Radio.html">Radio</a></li><li><a href="Option.html">Option</a></li><li><a href="Radiogroup.html">Radiogroup</a></li><li><a href="Scrollbar.html">Scrollbar</a></li><li><a href="Searchbox.html">Searchbox</a></li><li><a href="Slider.html">Slider</a></li><li><a href="Spinbutton.html">Spinbutton</a></li><li><a href="Switch.html">Switch</a></li><li><a href="Textbox.html">Textbox</a></li></ul><h3>Events</h3><ul><li><a href="Link.html#event:accessibleclick">accessibleclick</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Feb 10 2018 18:48:52 GMT+0100 (W. Europe Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
